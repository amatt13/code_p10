\begin{figure}[H]
	\centering
	\begin{tikzpicture}[x=0.02cm,y=0.02cm]
	% place nodes
\node[location] at (110, 246) (id0) {c};
\node[location] at (433, -459) (id1) {c};
\node[location] at (-212, -374) (id2) {c};
\node[location] at (765, -127) (id3) {c};
\node[location] at (8, -408) (id4) {c};
\node[location] at (110, 136) (id5) {c};
\node[location] at (376, 264) (id6) {c};
\node[location] at (432, -48) (id7) {c};
\node[location] at (432, 40) (id8) {c};
\node[location] at (576, 40) (id9) {};
\node[location] at (576, -128) (id10) {};
\node[location] at (336, 208) (id11) {c};
\node[init] at (-76, 221) (id12) {c};
\node[location] at (-34, -374) (id13) {c};
\node[location] at (-34, -459) (id14) {c};
\node[location] at (-229, -127) (id15) {c};
\node[location] at (-229, -59) (id16) {c};
\node[location] at (110, 0) (id17) {c};
\node[location] at (229, -459) (id18) {c};
\node[location] at (229, 136) (id19) {c};
\node[location] at (229, -127) (id20) {};
\node[location] at (-76, -127) (id21) {c};
\node[location] at (-76, 136) (id22) {};
	% place node labels
	% place transition labels
	% place transition labels
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-275,-335) {\begin{tabular}{l}pre_in\end{tabular}};
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (546,79) {\begin{tabular}{l}Waiting\end{tabular}};
	% place transition labels
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (558,-88) {\begin{tabular}{l}Slewing\end{tabular}};
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
	% place transition labels
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (185,-470) {\begin{tabular}{l}Preempt\end{tabular}};
	% place transition labels
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (233,157) {\begin{tabular}{l}Release\end{tabular}};
	% place transition labels
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (227,-99) {\begin{tabular}{l}Occupied\end{tabular}};
	% place transition labels
	% place transition labels
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-88,124) {\begin{tabular}{l}Start\end{tabular}};
	% place transition labels
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (168,268) {\begin{tabular}{l}\textcolor{sync}{not\_rdy\_to\_rec[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-61,251) {\begin{tabular}{l}\textcolor{guard}{!hasSpace() || !in\_orbit[sat\_id]}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-52,234) {\begin{tabular}{l}\textcolor{sync}{transmit\_data[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-290,-233) {\begin{tabular}{l}\textcolor{guard}{current == RI}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-290,-250) {\begin{tabular}{l}\textcolor{sync}{release[sat\_id-1]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-290,-267) {\begin{tabular}{l}\textcolor{update}{active[sat\_id] = front()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-18,-488) {\begin{tabular}{l}\textcolor{guard}{!lowerPriority()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-10,-513) {\begin{tabular}{l}\textcolor{sync}{check!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (508,-224) {\begin{tabular}{l}\textcolor{guard}{lowerPriority()\&\&}\\\textcolor{guard}{active[sat\_id] != RECEIVE\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (508,-267) {\begin{tabular}{l}\textcolor{sync}{not\_rdy\_to\_rec[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (381,-284) {\begin{tabular}{l}\textcolor{guard}{lowerPriority()\&\&}\\\textcolor{guard}{active[sat\_id] ==}\\\textcolor{guard}{RECEIVE\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-239,-182) {\begin{tabular}{l}\textcolor{guard}{current == TI}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-239,-199) {\begin{tabular}{l}\textcolor{sync}{release[com]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-239,-216) {\begin{tabular}{l}\textcolor{update}{active[sat\_id] = front()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-205,-318) {\begin{tabular}{l}\textcolor{guard}{runnable[task] \&\&}\\\textcolor{guard}{internalCom()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-204,-352) {\begin{tabular}{l}\textcolor{sync}{release[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (568,-156) {\begin{tabular}{l}\textcolor{guard}{active[com] != TRANSMIT\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (627,-122) {\begin{tabular}{l}\textcolor{sync}{check?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (568,-71) {\begin{tabular}{l}\textcolor{guard}{active[com] == TRANSMIT\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (313,-165) {\begin{tabular}{l}\textcolor{guard}{active[sat\_id] == TRANSMIT\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (389,-182) {\begin{tabular}{l}\textcolor{sync}{not\_rdy\_to\_rec[com]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-299,-377) {\begin{tabular}{l}\textcolor{update}{task = active[sat\_id]}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (304,-369) {\begin{tabular}{l}\textcolor{sync}{transmit\_data[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (304,-386) {\begin{tabular}{l}\textcolor{update}{task = RECEIVE\_INDEX,}\\\textcolor{update}{RQ = sat\_id}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (15,-241) {\begin{tabular}{l}\textcolor{sync}{next[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (66,175) {\begin{tabular}{l}\textcolor{guard}{active[com] != RECEIVE\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (100,141) {\begin{tabular}{l}\textcolor{guard}{active[com] == }\\\textcolor{guard}{RECEIVE\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (134,107) {\begin{tabular}{l}\textcolor{sync}{release[com]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-50,285) {\begin{tabular}{l}\textcolor{sync}{release[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-50,269) {\begin{tabular}{l}\textcolor{update}{active[sat\_id] = -1}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (406,133) {\begin{tabular}{l}\textcolor{sync}{release[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (406,157) {\begin{tabular}{l}\textcolor{sync}{release[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (398,293) {\begin{tabular}{l}\textcolor{guard}{task == TRANSMIT\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (406,269) {\begin{tabular}{l}\textcolor{sync}{not\_rdy\_to\_rec[com]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (279,-20) {\begin{tabular}{l}\textcolor{sync}{transmit\_data[com]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (279,13) {\begin{tabular}{l}\textcolor{sync}{request[com]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (454,-27) {\begin{tabular}{l}\textcolor{guard}{rdyToTrans()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (438,-43) {\begin{tabular}{l}\textcolor{sync}{request[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (446,61) {\begin{tabular}{l}\textcolor{guard}{rdyToTrans()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (438,45) {\begin{tabular}{l}\textcolor{sync}{request[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (518,21) {\begin{tabular}{l}\textcolor{guard}{orientation(sat\_id) \&\& }\\\textcolor{guard}{!rdyToTrans()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (517,-12) {\begin{tabular}{l}\textcolor{sync}{transmit\_data[com]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (321,-63) {\begin{tabular}{l}\textcolor{guard}{task == TRANSMIT\_INDEX}\\\textcolor{guard}{\&\& !is\_synced \&\&}\\\textcolor{guard}{active[com] != TRANSMIT\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (466,-122) {\begin{tabular}{l}\textcolor{sync}{go!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (334,-123) {\begin{tabular}{l}\textcolor{update}{is\_synced = true}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (406,237) {\begin{tabular}{l}\textcolor{sync}{not\_rdy\_to\_rec[com]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (278,85) {\begin{tabular}{l}\textcolor{sync}{request[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (194,243) {\begin{tabular}{l}\textcolor{guard}{hasSpace()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (151,226) {\begin{tabular}{l}\textcolor{sync}{transmit\_data[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (66,209) {\begin{tabular}{l}\textcolor{update}{task = RECEIVE\_INDEX,}\\\textcolor{update}{active[sat\_id] = RECEIVE\_INDEX}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-162,197) {\begin{tabular}{l}\textcolor{update}{set\_com()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-18,-182) {\begin{tabular}{l}\textcolor{guard}{!runnable[task]}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-18,-199) {\begin{tabular}{l}\textcolor{update}{task = active[sat\_id]}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-146,-233) {\begin{tabular}{l}\textcolor{guard}{runnable[task] \&\&}\\\textcolor{guard}{!internalCom()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-146,-267) {\begin{tabular}{l}\textcolor{sync}{preemt[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-146,-284) {\begin{tabular}{l}\textcolor{update}{active[sat\_id] = front()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-95,-411) {\begin{tabular}{l}\textcolor{sync}{check?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-197,-411) {\begin{tabular}{l}\textcolor{update}{enqueue(task),}\\\textcolor{update}{current = active[sat\_id]}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-194,-123) {\begin{tabular}{l}\textcolor{sync}{check?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-258,-139) {\begin{tabular}{l}\textcolor{update}{enqueue(task),}\\\textcolor{update}{active[sat\_id] = front()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-234,-75) {\begin{tabular}{l}\textcolor{sync}{check!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-186,53) {\begin{tabular}{l}\textcolor{guard}{queue[sat\_id][0] == -1 ||}\\\textcolor{guard}{!runnable[queue[sat\_id][0]]}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-186,21) {\begin{tabular}{l}\textcolor{update}{active[sat\_id] = -1}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-27,-29) {\begin{tabular}{l}\textcolor{sync}{check?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-27,5) {\begin{tabular}{l}\textcolor{update}{orderQueue(),}\\\textcolor{update}{active[sat\_id] = front()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (32,-428) {\begin{tabular}{l}\textcolor{guard}{!lowerPriority()}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (41,-454) {\begin{tabular}{l}\textcolor{sync}{check!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-58,157) {\begin{tabular}{l}\textcolor{guard}{empty(queue[sat\_id])}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-42,141) {\begin{tabular}{l}\textcolor{update}{active[sat\_id] = -1}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (41,-301) {\begin{tabular}{l}\textcolor{update}{enqueue(task),}\\\textcolor{update}{task = active[sat\_id]}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-2,90) {\begin{tabular}{l}\textcolor{guard}{!empty(queue[sat\_id])}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (49,73) {\begin{tabular}{l}\textcolor{sync}{check!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (160,-284) {\begin{tabular}{l}\textcolor{guard}{validSuggestion(sat\_id)}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (185,-301) {\begin{tabular}{l}\textcolor{sync}{add\_task[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (185,-326) {\begin{tabular}{l}\textcolor{update}{task = sats[sat\_id].}\\\textcolor{update}{suggested\_task,}\\\textcolor{update}{RQ = sat\_id}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (174,37) {\begin{tabular}{l}\textcolor{sync}{release[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (166,69) {\begin{tabular}{l}\textcolor{update}{orderQueue(),}\\\textcolor{update}{RQ = sat\_id}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-18,-63) {\begin{tabular}{l}\textcolor{guard}{queue[sat\_id][0] != -1 \&\& }\\\textcolor{guard}{runnable[queue[sat\_id][0]] \&\&}\\\textcolor{guard}{active[sat\_id] != -1}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-18,-122) {\begin{tabular}{l}\textcolor{sync}{request[sat\_id]!}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-18,-131) {\begin{tabular}{l}\textcolor{update}{dequeue(), is\_synced = false,}\\\textcolor{update}{task = active[sat\_id],}\\\textcolor{update}{sugest\_iterations[sat\_id] = 0}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-350,115) {\begin{tabular}{l}\textcolor{sync}{add\_task[sat\_id]?}\\\end{tabular}};
\node[anchor=north west, text width=10cm, font=\tiny, align=left] at (-350,90) {\begin{tabular}{l}\textcolor{update}{task = sats[sat\_id].suggested\_task}\\\end{tabular}};
	% place transitions
\draw[->] (id0) -- (357, 246) -- (id6) {};
\draw[->] (id22) -- (-17, 246) -- (id0) {};
\draw[->] (id2) -- (-263, -374) -- (-263, -204) -- (-93, -204) -- (id21) {};
\draw[->] (id1) -- (433, -518) -- (-34, -518) -- (id14) {};
\draw[->] (id1) -- (510, -459) -- (510, -221) -- (306, -221) -- (id20) {};
\draw[->] (id1) -- (433, -238) -- (280, -238) -- (id20) {};
\draw[->] (id2) -- (-212, -204) -- (-93, -204) -- (id21) {};
\draw[->] (id13) -- (id2) {};
\draw[->] (id3) -- (663, -161) -- (578, -161) -- (id10) {};
\draw[->] (id10) -- (id3) {};
\draw[->] (id3) -- (671, -110) -- (671, 263) -- (id6) {};
\draw[->] (id20) -- (314, -144) -- (314, -187) -- (697, -187) -- (697, 263) -- (id6) {};
\draw[->] (id4) -- (-297, -408) -- (-297, -59) -- (id16) {};
\draw[->] (id20) -- (246, -280) -- (331, -280) -- (331, -459) -- (id1) {};
\draw[->] (id20) -- (153, -238) -- (8, -238) -- (id4) {};
\draw[->] (id19) -- (224, 160) -- (144, 160) -- (id5) {};
\draw[->] (id19) -- (id5) {};
\draw[->] (id6) -- (-48, 264) -- (id22) {};
\draw[->] (id9) -- (569, 127) -- (id19) {};
\draw[->] (id10) -- (584, -120) -- (680, -120) -- (680, 136) -- (584, 136) -- (584, 144) -- (568, 144) -- (568, 136) -- (id19) {};
\draw[->] (id10) -- (688, -128) -- (688, -96) -- (688, 264) -- (id6) {};
\draw[->] (id7) -- (272, -48) -- (id20) {};
\draw[->] (id8) -- (272, -8) -- (id20) {};
\draw[->] (id10) -- (560, -48) -- (id7) {};
\draw[->] (id9) -- (id8) {};
\draw[->] (id10) -- (id9) {};
\draw[->] (id20) -- (id10) {};
\draw[->] (id9) -- (576, 232) -- (376, 232) -- (id6) {};
\draw[->] (id11) -- (336, 32) -- (248, 0) -- (id20) {};
\draw[->] (id22) -- (0, 208) -- (id11) {};
\draw[->] (id12) -- (id22) {};
\draw[->] (id13) -- (-32, -192) -- (112, -192) -- (id20) {};
\draw[->] (id13) -- (-76, -374) -- (id21) {};
\draw[->] (id14) -- (id13) {};
\draw[->] (id15) -- (id21) {};
\draw[->] (id16) -- (id15) {};
\draw[->] (id21) -- (id22) {};
\draw[->] (id17) -- (-25, 0) -- (-25, -85) -- (id21) {};
\draw[->] (id18) -- (id14) {};
\draw[->] (id5) -- (id22) {};
\draw[->] (id18) -- (144, -306) -- (id20) {};
\draw[->] (id5) -- (id17) {};
\draw[->] (id20) -- (id18) {};
\draw[->] (id20) -- (id19) {};
\draw[->] (id21) -- (id20) {};
\draw[->] (id22) -- (-229, 136) -- (id16) {};
	\end{tikzpicture}
	\caption{The Scheduler template}
	\label{fig:t_base_Scheduler}
\end{figure}
